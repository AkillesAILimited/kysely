<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>DynamicModule | kysely</title>
	<meta name="description" content="Documentation for kysely">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
	<script async src="../assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.json" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">kysely</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../modules.html">kysely</a>
				</li>
				<li>
					<a href="DynamicModule.html">DynamicModule</a>
				</li>
			</ul>
			<h1>Class DynamicModule</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel tsd-hierarchy">
				<h3>Hierarchy</h3>
				<ul class="tsd-hierarchy">
					<li>
						<span class="target">DynamicModule</span>
					</li>
				</ul>
			</section>
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Constructors</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-constructor tsd-parent-kind-class"><a href="DynamicModule.html#constructor" class="tsd-kind-icon">constructor</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Methods</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter"><a href="DynamicModule.html#ref" class="tsd-kind-icon">ref</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Constructors</h2>
				<section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class">
					<a name="constructor" class="tsd-anchor"></a>
					<h3>constructor</h3>
					<ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class">
						<li class="tsd-signature tsd-kind-icon">new <wbr>Dynamic<wbr>Module<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="DynamicModule.html" class="tsd-signature-type" data-tsd-kind="Class">DynamicModule</a></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
							</aside>
							<h4 class="tsd-returns-title">Returns <a href="DynamicModule.html" class="tsd-signature-type" data-tsd-kind="Class">DynamicModule</a></h4>
						</li>
					</ul>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Methods</h2>
				<section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter">
					<a name="ref" class="tsd-anchor"></a>
					<h3>ref</h3>
					<ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter">
						<li class="tsd-signature tsd-kind-icon">ref&lt;R&gt;<span class="tsd-signature-symbol">(</span>reference<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">DynamicReferenceBuilder</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">R</span><span class="tsd-signature-symbol">&gt;</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Creates a dynamic reference to a column that is not know at compile time.</p>
								</div>
								<p>Kysely is built in a way that by default you can&#39;t refer to tables or columns
									that are not actually visible in the current query and context. This is all
									done by typescript at compile time, which means that you need to know the
								columns and tables at compile time. This is not always the case of course.</p>
								<p>This method is meant to be used in those cases where the column names
								come from the user input or are not otherwise known at compile time.</p>
								<p>WARNING! Unlike values, column names are not escaped by the database engine
									or Kysely and if you pass in unchecked column names using this method, you
									create an SQL injection vulnerability. Always <strong>always</strong> validate the user
								input before passing it to this method.</p>
								<p>There are couple of examples below for some use cases, but you can pass
									<code>ref</code> to other methods as well. If the types allow you to pass a <code>ref</code>
								value to some place, it should work.</p>
								<dl class="tsd-comment-tags">
									<dt>example</dt>
									<dd><p>Filter by a column not know at compile time:</p>
										<pre><code class="language-ts"><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">someQuery</span><span style="color: #000000">(</span><span style="color: #001080">filterColumn</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">, </span><span style="color: #001080">filterValue</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">ref</span><span style="color: #000000"> } = </span><span style="color: #001080">db</span><span style="color: #000000">.</span><span style="color: #001080">dynamic</span>

<span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">db</span>
<span style="color: #000000">    .</span><span style="color: #795E26">selectFrom</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">selectAll</span><span style="color: #000000">()</span>
<span style="color: #000000">    .</span><span style="color: #795E26">where</span><span style="color: #000000">(</span><span style="color: #795E26">ref</span><span style="color: #000000">(</span><span style="color: #001080">filterColumn</span><span style="color: #000000">), </span><span style="color: #A31515">&#039;=&#039;</span><span style="color: #000000">, </span><span style="color: #001080">filterValue</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">execute</span><span style="color: #000000">()</span>
<span style="color: #000000">}</span>

<span style="color: #795E26">someQuery</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;first_name&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;Arnold&#039;</span><span style="color: #000000">)</span>
<span style="color: #795E26">someQuery</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person.last_name&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;Aniston&#039;</span><span style="color: #000000">)</span>
</code></pre>
									</dd>
									<dt>example</dt>
									<dd><p>Order by a column not know at compile time:</p>
										<pre><code class="language-ts"><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">someQuery</span><span style="color: #000000">(</span><span style="color: #001080">orderBy</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">ref</span><span style="color: #000000"> } = </span><span style="color: #001080">db</span><span style="color: #000000">.</span><span style="color: #001080">dynamic</span>

<span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">db</span>
<span style="color: #000000">    .</span><span style="color: #795E26">selectFrom</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">select</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person.first_name as fn&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">orderBy</span><span style="color: #000000">(</span><span style="color: #795E26">ref</span><span style="color: #000000">(</span><span style="color: #001080">orderBy</span><span style="color: #000000">))</span>
<span style="color: #000000">    .</span><span style="color: #795E26">execute</span><span style="color: #000000">()</span>
<span style="color: #000000">}</span>

<span style="color: #795E26">someQuery</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;fn&#039;</span><span style="color: #000000">)</span>
</code></pre>
									</dd>
									<dt>example</dt>
									<dd><p>In this example we add selections dynamically:</p>
										<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">ref</span><span style="color: #000000"> } = </span><span style="color: #001080">db</span><span style="color: #000000">.</span><span style="color: #001080">dynamic</span>

<span style="color: #008000">// Some column name provided by the user. Value not known at compile time.</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">columnFromUserInput</span><span style="color: #000000"> = </span><span style="color: #001080">req</span><span style="color: #000000">.</span><span style="color: #001080">query</span><span style="color: #000000">.</span><span style="color: #001080">select</span><span style="color: #000000">;</span>

<span style="color: #008000">// A type that lists all possible values `columnFromUserInput` can have.</span>
<span style="color: #008000">// You can use `keyof Person` if any column of an interface is allowed.</span>
<span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #267F99">PossibleColumns</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;last_name&#039;</span><span style="color: #000000"> | </span><span style="color: #A31515">&#039;first_name&#039;</span><span style="color: #000000"> | </span><span style="color: #A31515">&#039;birth_date&#039;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">person</span><span style="color: #000000">] = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">db</span><span style="color: #000000">.</span><span style="color: #795E26">selectFrom</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">  .</span><span style="color: #795E26">select</span><span style="color: #000000">([</span>
<span style="color: #000000">    </span><span style="color: #795E26">ref</span><span style="color: #000000">&lt;</span><span style="color: #267F99">PossibleColumns</span><span style="color: #000000">&gt;(</span><span style="color: #001080">columnFromUserInput</span><span style="color: #000000">)</span>
<span style="color: #000000">    </span><span style="color: #A31515">&#039;id&#039;</span>
<span style="color: #000000">  ])</span>
<span style="color: #000000">  .</span><span style="color: #795E26">execute</span><span style="color: #000000">()</span>

<span style="color: #008000">// The resulting type contains all `PossibleColumns` as optional fields</span>
<span style="color: #008000">// because we cannot know which field was actually selected before</span>
<span style="color: #008000">// running the code.</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">lastName</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000"> | </span><span style="color: #267F99">undefined</span><span style="color: #000000"> = </span><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #001080">last_name</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">firstName</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000"> | </span><span style="color: #267F99">undefined</span><span style="color: #000000"> = </span><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #001080">first_name</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">birthDate</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000"> | </span><span style="color: #267F99">undefined</span><span style="color: #000000"> = </span><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #001080">birth_date</span>

<span style="color: #008000">// The result type also contains the compile time selection `id`.</span>
<span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #001080">id</span>
</code></pre>
									</dd>
								</dl>
							</div>
							<h4 class="tsd-type-parameters-title">Type parameters</h4>
							<ul class="tsd-type-parameters">
								<li>
									<h4>R<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span> = <span class="tsd-signature-type">never</span></h4>
								</li>
							</ul>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>reference: <span class="tsd-signature-type">string</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">DynamicReferenceBuilder</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">R</span><span class="tsd-signature-symbol">&gt;</span></h4>
						</li>
					</ul>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="../modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
				<ul class="current">
					<li class="current tsd-kind-class">
						<a href="DynamicModule.html" class="tsd-kind-icon">Dynamic<wbr>Module</a>
						<ul>
							<li class=" tsd-kind-constructor tsd-parent-kind-class">
								<a href="DynamicModule.html#constructor" class="tsd-kind-icon">constructor</a>
							</li>
							<li class=" tsd-kind-method tsd-parent-kind-class tsd-has-type-parameter">
								<a href="DynamicModule.html#ref" class="tsd-kind-icon">ref</a>
							</li>
						</ul>
					</li>
				</ul>
				<ul class="after-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
</body>
</html>