<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>kysely</title>
	<meta name="description" content="Documentation for kysely">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">kysely</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>kysely</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#kysely" id="kysely" style="color: inherit; text-decoration: none;">
					<h1><a href="https://koskimas.github.io/kysely/index.html">Kysely</a></h1>
				</a>
				<p>A type-safe and autocompletion-friendly typescript SQL query builder for node.js. Heavily inspired by
				<a href="http://knexjs.org/">knex</a> but not a clone.</p>
				<p><img src="assets/images/demo.gif" alt=""></p>
				<p>Kysely&#39;s typings only allow you to use tables that are available in the database and refer to
					columns of the tables that are joined to the query. The result type always only contains the selected
					columns with correct types and aliases. This allows tools like vscode autocompletion to make your life
				so much easier.</p>
				<p>As you can see in the gif above, through the pure magic of modern typescript, Kysely is even able to parse
					the alias given to <code>pet.name</code> and add the <code>pet_name</code> column to the result row type. Kysely is able to infer
					colum names and types from selected subqueries, joined subqueries, <code>with</code> statements and pretty much
					anything you can think of. Typescript is always there for you to tell what kind of query you can build
				and offer completions.</p>
				<p>Of course there are cases where things cannot be typed at compile time, and Kysely offers escape
					hatches for these situations. With typescript you can always cast something to <code>any</code> if the types
					fail you. with Kysely you can also explicitly tell it to ignore the typings, but the default is always
				type-safety!</p>
				<p>All you need to do is define an interface for each table in the database and pass those
				interfaces to the <code>Kysely</code> constructor:</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Kysely</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;kysely&#039;</span>

<span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">Person</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #267F99">number</span>
<span style="color: #000000">  </span><span style="color: #001080">first_name</span><span style="color: #000000">: </span><span style="color: #267F99">string</span>
<span style="color: #000000">  </span><span style="color: #001080">last_name</span><span style="color: #000000">: </span><span style="color: #267F99">string</span>
<span style="color: #000000">  </span><span style="color: #001080">gender</span><span style="color: #000000">: </span><span style="color: #A31515">&#039;male&#039;</span><span style="color: #000000"> | </span><span style="color: #A31515">&#039;female&#039;</span><span style="color: #000000"> | </span><span style="color: #A31515">&#039;other&#039;</span>
<span style="color: #000000">}</span>

<span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">Pet</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #267F99">number</span>
<span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #267F99">string</span>
<span style="color: #000000">  </span><span style="color: #001080">owner_id</span><span style="color: #000000">: </span><span style="color: #267F99">number</span>
<span style="color: #000000">  </span><span style="color: #001080">species</span><span style="color: #000000">: </span><span style="color: #A31515">&#039;dog&#039;</span><span style="color: #000000"> | </span><span style="color: #A31515">&#039;cat&#039;</span>
<span style="color: #000000">}</span>

<span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">Movie</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #267F99">string</span>
<span style="color: #000000">  </span><span style="color: #001080">stars</span><span style="color: #000000">: </span><span style="color: #267F99">number</span>
<span style="color: #000000">}</span>

<span style="color: #008000">// Keys are table names.</span>
<span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">Database</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">person</span><span style="color: #000000">: </span><span style="color: #267F99">Person</span>
<span style="color: #000000">  </span><span style="color: #001080">pet</span><span style="color: #000000">: </span><span style="color: #267F99">Pet</span>
<span style="color: #000000">  </span><span style="color: #001080">movie</span><span style="color: #000000">: </span><span style="color: #267F99">Movie</span>
<span style="color: #000000">}</span>

<span style="color: #008000">// You&#039;d create one of these when you start your app.</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">db</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Kysely</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Database</span><span style="color: #000000">&gt;({</span>
<span style="color: #000000">  </span><span style="color: #001080">dialect:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;postgres&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">host:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;localhost&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">database:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;kysely_test&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">})</span>

<span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">demo</span><span style="color: #000000">() {</span>
<span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">person</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">db</span>
<span style="color: #000000">    .</span><span style="color: #795E26">selectFrom</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">innerJoin</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;pet&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;pet.owner_id&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;person.id&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">select</span><span style="color: #000000">([</span><span style="color: #A31515">&#039;first_name&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;pet.name as pet_name&#039;</span><span style="color: #000000">])</span>
<span style="color: #000000">    .</span><span style="color: #795E26">where</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;person.id&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;=&#039;</span><span style="color: #000000">, </span><span style="color: #098658">1</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">executeTakeFirst</span><span style="color: #000000">()</span>

<span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">person</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #001080">pet_name</span>
<span style="color: #000000">  }</span>
<span style="color: #000000">}</span>
</code></pre>
				<a href="#work-in-progress" id="work-in-progress" style="color: inherit; text-decoration: none;">
					<h1>Work in progress</h1>
				</a>
				<p>Kysely currently only works on postgres. You can install it using</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> </span><span style="color: #001080">kysely</span><span style="color: #000000"> </span><span style="color: #001080">pg</span>
</code></pre>
				<p>Many features are still missing and the documentation is very limited. Kysely is being
					actively developed and things will improve fast. I wouldn&#39;t recommend using it for anything
				serious yet, but you can install it and play around with it.</p>
				<a href="#why-not-just-contribute-to-knex" id="why-not-just-contribute-to-knex" style="color: inherit; text-decoration: none;">
					<h1>Why not just contribute to knex</h1>
				</a>
				<p>Kysely is very similar to knex, but it also attempts to fix things that I personally find not-so-good
					in knex. Bringing the type system and the changes to knex would mean very significant breaking changes
					That&#39;s not possible at this point of the project. Knex was also originally written for javascript and
					the typescript typings were added afterwards. That always leads to compromises in the types. Designing
				a library for typescript from the ground up produces much better and simpler types.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/aliasedquerybuilder.html" class="tsd-kind-icon">Aliased<wbr>Query<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/aliasedrawbuilder.html" class="tsd-kind-icon">Aliased<wbr>Raw<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/columnbuilder.html" class="tsd-kind-icon">Column<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/createtablebuilder.html" class="tsd-kind-icon">Create<wbr>Table<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/defaultquerycompiler.html" class="tsd-kind-icon">Default<wbr>Query<wbr>Compiler</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/driver.html" class="tsd-kind-icon">Driver</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/droptablebuilder.html" class="tsd-kind-icon">Drop<wbr>Table<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/joinbuilder.html" class="tsd-kind-icon">Join<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/kysely.html" class="tsd-kind-icon">Kysely</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/postgresdialect.html" class="tsd-kind-icon">Postgres<wbr>Dialect</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/postgresdriver.html" class="tsd-kind-icon">Postgres<wbr>Driver</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/querybuilder.html" class="tsd-kind-icon">Query<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/rawbuilder.html" class="tsd-kind-icon">Raw<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/subquerybuilder.html" class="tsd-kind-icon">Sub<wbr>Query<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/transaction.html" class="tsd-kind-icon">Transaction</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/compiledquery.html" class="tsd-kind-icon">Compiled<wbr>Query</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/createtablebuilderconstructorargs.html" class="tsd-kind-icon">Create<wbr>Table<wbr>Builder<wbr>Constructor<wbr>Args</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/databaseconnection.html" class="tsd-kind-icon">Database<wbr>Connection</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/driverconfig.html" class="tsd-kind-icon">Driver<wbr>Config</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/driverconfigwithdefaults.html" class="tsd-kind-icon">Driver<wbr>Config<wbr>With<wbr>Defaults</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/droptablebuilderconstructorargs.html" class="tsd-kind-icon">Drop<wbr>Table<wbr>Builder<wbr>Constructor<wbr>Args</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/dynamicmodule.html" class="tsd-kind-icon">Dynamic<wbr>Module</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/kyselyconfig.html" class="tsd-kind-icon">Kysely<wbr>Config</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/kyselyconstructorargs.html" class="tsd-kind-icon">Kysely<wbr>Constructor<wbr>Args</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/migration.html" class="tsd-kind-icon">Migration</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/migrationmodule.html" class="tsd-kind-icon">Migration<wbr>Module</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/poolconfig.html" class="tsd-kind-icon">Pool<wbr>Config</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/poolconfigwithdefaults.html" class="tsd-kind-icon">Pool<wbr>Config<wbr>With<wbr>Defaults</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/querybuilderconstructorargs.html" class="tsd-kind-icon">Query<wbr>Builder<wbr>Constructor<wbr>Args</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/querycompiler.html" class="tsd-kind-icon">Query<wbr>Compiler</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter">
						<a href="interfaces/queryresult.html" class="tsd-kind-icon">Query<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/rawbuilderconstructorargs.html" class="tsd-kind-icon">Raw<wbr>Builder<wbr>Constructor<wbr>Args</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/schemamodule.html" class="tsd-kind-icon">Schema<wbr>Module</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#columnbuildercallback" class="tsd-kind-icon">Column<wbr>Builder<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#compileentrypointnode" class="tsd-kind-icon">Compile<wbr>Entry<wbr>Point<wbr>Node</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="modules.html#migration_lock_id" class="tsd-kind-icon">MIGRATION_<wbr>LOCK_<wbr>ID</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="modules.html#migration_lock_table" class="tsd-kind-icon">MIGRATION_<wbr>LOCK_<wbr>TABLE</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="modules.html#migration_table" class="tsd-kind-icon">MIGRATION_<wbr>TABLE</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#createdynamicmodule" class="tsd-kind-icon">create<wbr>Dynamic<wbr>Module</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter">
						<a href="modules.html#createemptyselectquery" class="tsd-kind-icon">create<wbr>Empty<wbr>Select<wbr>Query</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#createmigrationmodule" class="tsd-kind-icon">create<wbr>Migration<wbr>Module</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#createschemamodule" class="tsd-kind-icon">create<wbr>Schema<wbr>Module</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>